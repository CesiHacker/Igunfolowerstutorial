<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ExamMaster Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #06b6d4;
            --accent: #f43f5e;
            --dark: #0f172a;
            --light: #f8fafc;
            --surface: #1e293b;
            --surface-light: #334155;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; font-family: 'Plus Jakarta Sans', sans-serif; }
        
        body {
            background-color: var(--dark);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(79, 70, 229, 0.15) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(6, 182, 212, 0.15) 0%, transparent 20%);
        }

        /* --- Framework & Layout --- */
        .app-container {
            width: 100%;
            max-width: 800px;
            padding: 20px;
            perspective: 1000px;
        }

        .screen {
            display: none;
            animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .screen.active { display: block; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* --- Components --- */
        .card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        h1 { font-size: 2rem; font-weight: 800; margin-bottom: 10px; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2 { font-size: 1.5rem; margin-bottom: 20px; color: var(--text-main); }
        p { color: var(--text-muted); line-height: 1.6; margin-bottom: 20px; }

        /* Inputs */
        .input-group { margin-bottom: 20px; text-align: left; }
        label { display: block; color: var(--text-muted); font-size: 0.9rem; margin-bottom: 8px; font-weight: 600; }
        input, textarea {
            width: 100%; padding: 16px; border-radius: 12px;
            background: var(--surface-light); border: 2px solid transparent;
            color: white; font-size: 1rem; transition: 0.3s;
        }
        input:focus, textarea:focus { border-color: var(--primary); background: var(--surface); box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2); }
        textarea { font-family: 'Courier New', monospace; min-height: 250px; line-height: 1.4; }

        /* Buttons */
        .btn {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            font-size: 1rem; font-weight: 700; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-primary { background: var(--primary); color: white; box-shadow: 0 10px 20px -5px rgba(79, 70, 229, 0.4); }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }
        
        .btn-secondary { background: var(--surface-light); color: var(--text-main); margin-top: 10px; }
        .btn-secondary:hover { background: #475569; }

        .btn-danger { background: rgba(239, 68, 68, 0.2); color: var(--danger); border: 1px solid rgba(239, 68, 68, 0.5); }
        .btn-danger:hover { background: rgba(239, 68, 68, 0.3); }

        /* Quiz UI */
        .quiz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .timer-badge { background: rgba(6, 182, 212, 0.2); color: var(--secondary); padding: 8px 16px; border-radius: 20px; font-weight: 700; font-feature-settings: "tnum"; }
        
        .option {
            background: var(--surface-light); padding: 18px; margin-bottom: 12px; border-radius: 12px;
            cursor: pointer; transition: 0.2s; border: 2px solid transparent; display: flex; align-items: center;
        }
        .option:hover { background: #475569; transform: translateX(5px); }
        .option.selected { border-color: var(--primary); background: rgba(79, 70, 229, 0.1); }
        
        .option.correct { border-color: var(--success); background: rgba(16, 185, 129, 0.2); }
        .option.wrong { border-color: var(--danger); background: rgba(239, 68, 68, 0.2); opacity: 0.7; }

        /* Progress Bar */
        .progress-container { width: 100%; height: 6px; background: var(--surface-light); border-radius: 3px; margin-top: 20px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--primary); width: 0%; transition: 0.5s; }

        /* Tabs */
        .tab-group { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab { flex: 1; padding: 12px; background: transparent; border: 2px solid var(--surface-light); color: var(--text-muted); border-radius: 10px; cursor: pointer; }
        .tab.active { border-color: var(--primary); color: white; background: rgba(79, 70, 229, 0.1); }

        /* Toast Notification */
        #toast {
            position: fixed; top: 20px; right: 20px; background: var(--surface); border-left: 5px solid var(--primary);
            padding: 15px 25px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transform: translateX(200%); transition: 0.5s; z-index: 9999; display: flex; align-items: center; gap: 10px;
        }
        #toast.show { transform: translateX(0); }

        /* Stats Grid */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .stat-box { background: var(--surface-light); padding: 15px; border-radius: 12px; text-align: center; }
        .stat-val { font-size: 1.5rem; font-weight: 800; color: white; }
        .stat-label { font-size: 0.8rem; color: var(--text-muted); }

    </style>
</head>
<body>

    <div id="toast"><span>Mesaj</span></div>

    <div class="app-container">
        
        <div id="screen-entry" class="screen active">
            <div class="card" style="text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 10px;">üéì</div>
                <h1>ExamMaster Pro</h1>
                <p>ƒ∞mtahan platformasƒ±na xo≈ü g…ôlmisiniz. Z…ôhm…ôt olmasa giri≈ü n√∂v√ºn√º se√ßin.</p>
                
                <div class="tab-group">
                    <button class="tab active" onclick="switchTab('user')">üë§ T…ôl…ôb…ô</button>
                    <button class="tab" onclick="switchTab('admin')">üõ°Ô∏è Admin</button>
                </div>

                <div id="form-admin" style="display: none;">
                    <div class="input-group">
                        <label>ƒ∞stifad…ô√ßi adƒ±</label>
                        <input type="text" id="admin-user" placeholder="cesi">
                    </div>
                    <div class="input-group">
                        <label>≈ûifr…ô</label>
                        <input type="password" id="admin-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button class="btn btn-primary" onclick="adminLogin()">Admin Giri≈üi</button>
                </div>

                <div id="form-user">
                    <div class="input-group">
                        <label>Ad v…ô Soyad</label>
                        <input type="text" id="user-name" placeholder="M…ôs: ∆èli ∆èliyev">
                    </div>
                    <button class="btn btn-primary" onclick="startExamCheck()">ƒ∞mtahana Ba≈üla</button>
                </div>
            </div>
        </div>

        <div id="screen-admin" class="screen">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>‚öôÔ∏è Admin Paneli</h2>
                    <button class="btn btn-danger" style="width: auto; padding: 8px 15px;" onclick="logout()">√áƒ±xƒ±≈ü</button>
                </div>
                
                <p>A≈üaƒüƒ±dakƒ± qutuya JSON formatƒ±nda suallarƒ± yapƒ±≈üdƒ±rƒ±n. Bu suallar yadda≈üda saxlanƒ±lacaq v…ô User giri≈üind…ô g√∂r√ºn…ôc…ôk.</p>
                
                <div class="input-group">
                    <label>Suallar (JSON Formatƒ±)</label>
                    <textarea id="json-editor" spellcheck="false"></textarea>
                </div>

                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" onclick="formatJSON()">üßπ Formatla (G√∂z…ôll…ô≈üdir)</button>
                    <button class="btn btn-primary" onclick="saveQuestions()">üíæ Yadda Saxla v…ô Yayƒ±mla</button>
                </div>

                <div style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                    <p style="font-size: 0.8rem;">Hazƒ±rda sistemd…ô: <strong id="question-count-badge" style="color: var(--success);">0 sual</strong> var.</p>
                </div>
            </div>
        </div>

        <div id="screen-quiz" class="screen">
            <div class="card">
                <div class="quiz-header">
                    <div>
                        <span style="font-size: 0.9rem; color: var(--text-muted);" id="student-name-display">T…ôl…ôb…ô</span>
                        <h3 id="question-index">Sual 1 / 10</h3>
                    </div>
                    <div class="timer-badge" id="timer">00:00</div>
                </div>

                <div id="question-text" style="font-size: 1.2rem; font-weight: 600; margin-bottom: 20px;">
                    Sual m…ôtni bura g…ôl…ôc…ôk...
                </div>

                <div id="options-container">
                    </div>

                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>

                <div style="display: flex; justify-content: space-between; margin-top: 25px;">
                    <button class="btn btn-secondary" style="width: 48%;" onclick="prevQuestion()">‚¨Ö Geri</button>
                    <button class="btn btn-primary" style="width: 48%;" onclick="nextQuestion()" id="next-btn">N√∂vb…ôti ‚û°</button>
                </div>
            </div>
        </div>

        <div id="screen-result" class="screen">
            <div class="card" style="text-align: center;">
                <div style="font-size: 4rem; margin-bottom: 10px;">üèÜ</div>
                <h2>ƒ∞mtahan Bitdi!</h2>
                <h1 id="final-score" style="font-size: 3.5rem; color: var(--success);">85%</h1>
                <p id="result-msg">T…ôbrikl…ôr, yax≈üƒ± n…ôtic…ôdir.</p>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-val" id="stat-correct" style="color: var(--success);">0</div>
                        <div class="stat-label">D√ºzg√ºn</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-val" id="stat-wrong" style="color: var(--danger);">0</div>
                        <div class="stat-label">S…ôhv</div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="location.reload()">üîÑ Yenid…ôn Ba≈üla</button>
            </div>
        </div>

    </div>

<script>
    // --- KONFƒ∞QURASƒ∞YA V∆è STATE ---
    const AUTH = { user: "cesi", pass: "cesi123" };
    
    // Default Suallar (∆èg…ôr he√ß n…ô yoxdursa)
    const DEFAULT_QUESTIONS = [
        {
            "q": "Az…ôrbaycan Respublikasƒ±nƒ±n D√∂vl…ôt Bayraƒüƒ± ne√ß…ô r…ôngd…ôn ibar…ôtdir?",
            "o": ["2", "3", "4", "5"],
            "a": 1
        },
        {
            "q": "Komp√ºterin 'beyni' hansƒ± hiss…ôdir?",
            "o": ["RAM", "HDD", "CPU", "GPU"],
            "a": 2
        }
    ];

    let state = {
        questions: [],
        currentIdx: 0,
        answers: {}, // {0: 1, 1: 3} kimi saxlayacaq
        timer: null,
        timeElapsed: 0,
        userName: ''
    };

    // --- Sƒ∞STEM BA≈ûLAYANDA ---
    window.onload = () => {
        // LocalStorage-dan suallarƒ± yoxla
        const savedData = localStorage.getItem('exam_data');
        if(savedData) {
            state.questions = JSON.parse(savedData);
        } else {
            state.questions = DEFAULT_QUESTIONS;
            localStorage.setItem('exam_data', JSON.stringify(DEFAULT_QUESTIONS));
        }
        
        // Admin panelind…ô g√∂st…ôr
        document.getElementById('json-editor').value = JSON.stringify(state.questions, null, 4);
        updateBadge();
    };

    // --- NAVƒ∞QASƒ∞YA ---
    function switchTab(type) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');
        
        if(type === 'admin') {
            document.getElementById('form-user').style.display = 'none';
            document.getElementById('form-admin').style.display = 'block';
        } else {
            document.getElementById('form-user').style.display = 'block';
            document.getElementById('form-admin').style.display = 'none';
        }
    }

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function showToast(msg, type='success') {
        const t = document.getElementById('toast');
        t.innerHTML = `<span>${type === 'error' ? '‚ùå' : '‚úÖ'} ${msg}</span>`;
        t.style.borderLeftColor = type === 'error' ? 'var(--danger)' : 'var(--success)';
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
    }

    // --- ADMIN M∆èNTƒ∞Qƒ∞ ---
    function adminLogin() {
        const u = document.getElementById('admin-user').value;
        const p = document.getElementById('admin-pass').value;

        if (u === AUTH.user && p === AUTH.pass) {
            showToast('Giri≈ü uƒüurludur!');
            showScreen('screen-admin');
        } else {
            showToast('ƒ∞stifad…ô√ßi adƒ± v…ô ya ≈üifr…ô s…ôhvdir!', 'error');
            document.getElementById('admin-pass').value = '';
        }
    }

    function logout() {
        location.reload();
    }

    function formatJSON() {
        try {
            const raw = document.getElementById('json-editor').value;
            const parsed = JSON.parse(raw);
            document.getElementById('json-editor').value = JSON.stringify(parsed, null, 4);
            showToast('JSON formatlandƒ±.');
        } catch (e) {
            showToast('JSON x…ôtasƒ±: ' + e.message, 'error');
        }
    }

    function saveQuestions() {
        try {
            const raw = document.getElementById('json-editor').value;
            const parsed = JSON.parse(raw);
            
            if (!Array.isArray(parsed) || parsed.length === 0) throw new Error("Format siyahƒ± [] olmalƒ±dƒ±r.");
            if (!parsed[0].hasOwnProperty('q') || !parsed[0].hasOwnProperty('o')) throw new Error("Sual obyekti s…ôhvdir (q, o, a sah…ôl…ôri lazƒ±mdƒ±r).");

            localStorage.setItem('exam_data', JSON.stringify(parsed));
            state.questions = parsed;
            updateBadge();
            showToast('Suallar yadda saxlanƒ±ldƒ± v…ô yayƒ±mlandƒ±!');
        } catch (e) {
            showToast('X…ôta: ' + e.message, 'error');
        }
    }

    function updateBadge() {
        document.getElementById('question-count-badge').innerText = state.questions.length + " sual";
    }

    // --- USER / IMTAHAN M∆èNTƒ∞Qƒ∞ ---
    function startExamCheck() {
        const name = document.getElementById('user-name').value.trim();
        if (name.length < 3) {
            showToast('Z…ôhm…ôt olmasa adƒ±nƒ±zƒ± tam yazƒ±n.', 'error');
            return;
        }
        
        // Yenil…ônmi≈ü datanƒ± √ß…ôk
        const savedData = localStorage.getItem('exam_data');
        if(savedData) state.questions = JSON.parse(savedData);

        state.userName = name;
        state.currentIdx = 0;
        state.answers = {};
        state.timeElapsed = 0;

        document.getElementById('student-name-display').innerText = name;
        showScreen('screen-quiz');
        renderQuestion();
        startTimer();
    }

    function startTimer() {
        if(state.timer) clearInterval(state.timer);
        state.timer = setInterval(() => {
            state.timeElapsed++;
            const m = Math.floor(state.timeElapsed / 60).toString().padStart(2, '0');
            const s = (state.timeElapsed % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${m}:${s}`;
        }, 1000);
    }

    function renderQuestion() {
        const qData = state.questions[state.currentIdx];
        const total = state.questions.length;

        // UI Update
        document.getElementById('question-index').innerText = `Sual ${state.currentIdx + 1} / ${total}`;
        document.getElementById('question-text').innerText = qData.q;
        document.getElementById('progress-bar').style.width = `${((state.currentIdx + 1) / total) * 100}%`;

        // D√ºym…ô m…ôtni
        document.getElementById('next-btn').innerText = (state.currentIdx === total - 1) ? "Bitir v…ô Yoxla" : "N√∂vb…ôti ‚û°";

        // Variantlar
        let html = '';
        qData.o.forEach((opt, index) => {
            const isSelected = state.answers[state.currentIdx] === index ? 'selected' : '';
            html += `
                <div class="option ${isSelected}" onclick="selectOption(${index})">
                    <div style="width: 30px; height: 30px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold;">
                        ${String.fromCharCode(65 + index)}
                    </div>
                    ${opt}
                </div>
            `;
        });
        document.getElementById('options-container').innerHTML = html;
    }

    function selectOption(index) {
        state.answers[state.currentIdx] = index;
        renderQuestion(); // Se√ßimi g√∂st…ôrm…ôk √º√ß√ºn yenil…ô
    }

    function nextQuestion() {
        if (state.currentIdx < state.questions.length - 1) {
            state.currentIdx++;
            renderQuestion();
        } else {
            finishExam();
        }
    }

    function prevQuestion() {
        if (state.currentIdx > 0) {
            state.currentIdx--;
            renderQuestion();
        }
    }

    function finishExam() {
        clearInterval(state.timer);
        let correct = 0;
        let wrong = 0;

        state.questions.forEach((q, idx) => {
            if (state.answers[idx] === q.a) {
                correct++;
            } else {
                wrong++;
            }
        });

        const score = Math.round((correct / state.questions.length) * 100);
        
        document.getElementById('final-score').innerText = `${score}%`;
        document.getElementById('stat-correct').innerText = correct;
        document.getElementById('stat-wrong').innerText = wrong;

        let msg = "";
        if(score === 100) msg = "M√∂ht…ô≈ü…ôm! Dahis…ôn! üî•";
        else if(score >= 80) msg = "∆èla n…ôtic…ô! üöÄ";
        else if(score >= 50) msg = "Pis deyil, amma i≈ül…ôm…ôlis…ôn. üìö";
        else msg = "Daha √ßox √ßalƒ±≈ümalƒ±san. ‚ö†Ô∏è";
        
        document.getElementById('result-msg').innerText = msg;

        showScreen('screen-result');
    }

</script>
</body>
</html>
